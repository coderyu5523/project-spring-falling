<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <title>Falling</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
</head>
<body>
<header class="header-main" style="margin-top: 10px">
    <nav class="nav-header">
        <div class="logo">
            <a href="/">
                <!-- 로고 SVG -->
            </a>
        </div>
        <div class="nav-links" style="font-size: 14px">
            <a href="/song-chart" class="text-body">차트별</a>
            <a href="/song-genre" class="text-body">장르별</a>
            <a href="/storage" class="text-body">보관함</a>
            <a href="/subscription-list" class="text-body">이용권</a>
        </div>
        <div class="search-bar">
            <form action="/search" method="get" class="form-inline">
                <i class="fa fa-search"></i>
                <input type="text" placeholder="검색어를 입력하세요." name="keyword" id="inputBox">
            </form>
        </div>
        <div class="auth-links">
            <a href="/login-form" class="text-body">로그인</a>
            <a href="/join-section" class="text-body">회원가입</a>
            <!--                <a href="/logout" class="text-body">로그아웃</a>-->
            <!--                <a href="/profile" class="text-body">마이페이지</a>-->
        </div>
    </nav>
</header>
<!-- header end -->
<script>
    $(document).ready(function () {
        $('#inputBox').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/search/auto',
                    type: 'GET',
                    data: { keyword: request.term },
                    dataType: 'json',
                    success: function (data) {
                        console.log('Received data:', data); // 데이터를 로그로 출력
                        response($.map(data.body, function (item) {
                            return {
                                label: item.title,
                                value: item.title,
                                id: item.id
                            };
                        }));
                    },
                    error: function (xhr, status, error) {
                        console.error('Error:', error);
                        console.error('Status:', status);
                        console.error('Response:', xhr.responseText);
                    }
                });
            },
            minLength: 1,
            select: function (event, ui) {
                console.log('Selected ID:', ui.item.id);
            }
        });
    });
</script>
</body>
</html>
